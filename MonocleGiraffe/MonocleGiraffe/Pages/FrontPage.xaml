<Page
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MonocleGiraffe"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:MonocleGiraffe.Controls"
    xmlns:templates="using:MonocleGiraffe.Controls.ItemTemplates"
    xmlns:vm="using:MonocleGiraffe.ViewModels"
    xmlns:ext="using:MonocleGiraffe.Controls.Extensions"
    xmlns:Behaviors="using:Template10.Behaviors"
    xmlns:Interactivity="using:Microsoft.Xaml.Interactivity" 
    xmlns:Core="using:Microsoft.Xaml.Interactions.Core"
    x:Class="MonocleGiraffe.Pages.FrontPage"
    x:Name="PageRoot"
    mc:Ignorable="d" 
    DataContext="{Binding Source={StaticResource Locator}, Path=FrontPageViewModel}">

    <Page.Resources>
        <Style x:Key="CenteredGridViewStyle" TargetType="GridView">
            <Setter Property="Padding" Value="0,0,0,10"/>
            <Setter Property="IsTabStop" Value="False"/>
            <Setter Property="TabNavigation" Value="Once"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled"/>
            <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="False"/>
            <Setter Property="ScrollViewer.VerticalScrollMode" Value="Enabled"/>
            <Setter Property="ScrollViewer.IsVerticalRailEnabled" Value="True"/>
            <Setter Property="ScrollViewer.ZoomMode" Value="Disabled"/>
            <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
            <Setter Property="ScrollViewer.BringIntoViewOnFocusChange" Value="True"/>
            <Setter Property="IsSwipeEnabled" Value="True"/>
            <Setter Property="ItemContainerTransitions">
                <Setter.Value>
                    <TransitionCollection>
                        <AddDeleteThemeTransition/>
                        <ContentThemeTransition/>
                        <ReorderThemeTransition/>
                        <EntranceThemeTransition IsStaggeringEnabled="False"/>
                    </TransitionCollection>
                </Setter.Value>
            </Setter>
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <controls:ColumnPanel />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="GridView">
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                            <ScrollViewer x:Name="ScrollViewer" AutomationProperties.AccessibilityView="Raw" BringIntoViewOnFocusChange="{TemplateBinding ScrollViewer.BringIntoViewOnFocusChange}" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsHorizontalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsHorizontalScrollChainingEnabled}" IsVerticalScrollChainingEnabled="{TemplateBinding ScrollViewer.IsVerticalScrollChainingEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" TabNavigation="{TemplateBinding TabNavigation}" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="{TemplateBinding ScrollViewer.ZoomMode}">
                                <ItemsPresenter FooterTransitions="{TemplateBinding FooterTransitions}" FooterTemplate="{TemplateBinding FooterTemplate}" Footer="{TemplateBinding Footer}" HeaderTemplate="{TemplateBinding HeaderTemplate}" Header="{TemplateBinding Header}" HeaderTransitions="{TemplateBinding HeaderTransitions}" Padding="{TemplateBinding Padding}" HorizontalAlignment="Left"/>
                            </ScrollViewer>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="TopicsListViewItemStyle" TargetType="ListViewItem">
            <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}"/>
            <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{ThemeResource SystemControlForegroundBaseHighBrush}"/>
            <Setter Property="TabNavigation" Value="Local"/>
            <Setter Property="IsHoldingEnabled" Value="True"/>
            <Setter Property="Padding" Value="12,0,12,0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="MinWidth" Value="{ThemeResource ListViewItemMinWidth}"/>
            <Setter Property="MinHeight" Value="{ThemeResource ListViewItemMinHeight}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListViewItem">
                        <ListViewItemPresenter CheckBrush="{ThemeResource SystemControlForegroundBaseMediumHighBrush}" ContentMargin="{TemplateBinding Padding}" CheckMode="Inline" ContentTransitions="{TemplateBinding ContentTransitions}" CheckBoxBrush="{ThemeResource SystemControlForegroundBaseMediumHighBrush}" DragForeground="{ThemeResource ListViewItemDragForegroundThemeBrush}" DragOpacity="{ThemeResource ListViewItemDragThemeOpacity}" DragBackground="{ThemeResource ListViewItemDragBackgroundThemeBrush}" DisabledOpacity="{ThemeResource ListViewItemDisabledThemeOpacity}" FocusBorderBrush="{ThemeResource SystemControlForegroundAltHighBrush}" FocusSecondaryBorderBrush="{ThemeResource SystemControlForegroundBaseHighBrush}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" PointerOverForeground="{ThemeResource SystemControlHighlightAltBaseHighBrush}" PressedBackground="{ThemeResource SystemControlHighlightListMediumBrush}" PlaceholderBackground="{ThemeResource ListViewItemPlaceholderBackgroundThemeBrush}" PointerOverBackground="{ThemeResource SystemControlHighlightListLowBrush}" ReorderHintOffset="{ThemeResource ListViewItemReorderHintThemeOffset}" SelectedPressedBackground="{ThemeResource SystemControlHighlightListLowBrush}" SelectionCheckMarkVisualEnabled="True" SelectedPointerOverBackground="{ThemeResource SystemControlHighlightListLowBrush}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" Tag="{Binding IsSelected, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <ControlTemplate x:Key="CheckMark" TargetType="ContentControl">
            <Path Data="F 1 M 37.316,80.48 L 0,43.164 17.798,25.366 37.316,44.885 82.202,0 100,17.798 37.316,80.48 Z" Fill="{TemplateBinding Foreground}" Stretch="Uniform"/>
        </ControlTemplate>
        <Style x:Key="SearchTabToggleButtonStyle" TargetType="ToggleButton">
            <Setter Property="Background" Value="#FF333333"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="UseSystemFocusVisuals" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Grid x:Name="RootGrid" Background="{TemplateBinding Background}">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal">
                                        <Storyboard>
                                            <PointerUpThemeAnimation Storyboard.TargetName="RootGrid"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlBackgroundBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseMediumLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseHighBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <PointerUpThemeAnimation Storyboard.TargetName="RootGrid"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlBackgroundBaseMediumLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightTransparentBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseHighBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <PointerDownThemeAnimation Storyboard.TargetName="RootGrid"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlBackgroundBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledTransparentBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Checked">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltChromeWhiteBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltTransparentBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <PointerUpThemeAnimation Storyboard.TargetName="RootGrid"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="CheckedPointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseMediumLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightAltChromeWhiteBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <PointerUpThemeAnimation Storyboard.TargetName="RootGrid"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="CheckedPressed">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource AppThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <PointerDownThemeAnimation Storyboard.TargetName="RootGrid"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="CheckedDisabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlBackgroundBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledTransparentBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Indeterminate">
                                        <Storyboard>
                                            <PointerUpThemeAnimation Storyboard.TargetName="RootGrid"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="IndeterminatePointerOver">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlBackgroundBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseMediumLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseHighBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <PointerUpThemeAnimation Storyboard.TargetName="RootGrid"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="IndeterminatePressed">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlBackgroundBaseMediumLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightTransparentBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlHighlightBaseHighBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <PointerDownThemeAnimation Storyboard.TargetName="RootGrid"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="IndeterminateDisabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="RootGrid">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlBackgroundBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledBaseLowBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SystemControlDisabledTransparentBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <ContentPresenter x:Name="ContentPresenter" AutomationProperties.AccessibilityView="Raw" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTransitions="{TemplateBinding ContentTransitions}" Content="{TemplateBinding Content}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" Padding="{TemplateBinding Padding}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <Page.BottomAppBar>
        <CommandBar>
            <CommandBar.Content>
                <AppBarButton Icon="Camera" Foreground="{StaticResource AppThemeBrush}" Command="{Binding UploadCommand}"/>
            </CommandBar.Content>
            <AppBarButton Icon="Sort" Label="Sort" Visibility="{Binding SortVisibility}">
                <FlyoutBase.AttachedFlyout>
                    <MenuFlyout>
                        <MenuFlyoutItem Text="Viral" Command="{Binding GalleryVM.SortCommand}" CommandParameter="Viral"/>
                        <MenuFlyoutItem Text="Time" Command="{Binding GalleryVM.SortCommand}" CommandParameter="Time"/>
                    </MenuFlyout>
                </FlyoutBase.AttachedFlyout>
                <Interactivity:Interaction.Behaviors>
                    <Core:EventTriggerBehavior EventName="Tapped">
                        <Behaviors:OpenFlyoutAction/>
                    </Core:EventTriggerBehavior>
                </Interactivity:Interaction.Behaviors>
            </AppBarButton>
            <AppBarButton Icon="Sync" Label="Refresh" Command="{Binding RefreshCommand}" Visibility="{Binding RefreshVisibility}"/>
            <AppBarButton Icon="Add" Label="Add" Visibility="{Binding AddVisibility}" Command="{Binding AddCommand}"/>
            <CommandBar.SecondaryCommands>
                <AppBarButton Label="Feedback" Command="{Binding FeedbackCommand}"/>
                <AppBarButton Label="Settings" Command="{Binding SettingsCommand}"/>
            </CommandBar.SecondaryCommands>
        </CommandBar>
    </Page.BottomAppBar>

    <Grid x:Name="LayoutRoot" Background="{ThemeResource AppBarBackgroundThemeBrush}">        
        <Pivot SelectedIndex="{Binding PivotIndex, Mode=TwoWay}">
            <Pivot.Resources>
                <Style TargetType="PivotHeaderItem">
                    <Setter Property="Height" Value="Auto" />
                    <Setter Property="VerticalContentAlignment" Value="Center" />
                    <Setter Property="IsTabStop" Value="False" />
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="PivotHeaderItem">
                                <Grid x:Name="Grid" Background="{TemplateBinding Background}">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="SelectionStates">
                                            <VisualStateGroup.Transitions>
                                                <VisualTransition From="Unselected" To="UnselectedLocked" GeneratedDuration="0:0:0.33" />
                                                <VisualTransition From="UnselectedLocked" To="Unselected" GeneratedDuration="0:0:0.33" />
                                            </VisualStateGroup.Transitions>
                                            <VisualState x:Name="Disabled"/>
                                            <VisualState x:Name="Unselected" />
                                            <VisualState x:Name="UnselectedLocked"/>
                                            <VisualState x:Name="Selected">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
														Storyboard.TargetProperty="Tag" >
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Selected" />
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnselectedPointerOver">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
														Storyboard.TargetProperty="Tag" >
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="UnselectedPointerOver" />
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="SelectedPointerOver">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
														Storyboard.TargetProperty="Tag" >
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="SelectedPointerOver" />
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="UnselectedPressed">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
														Storyboard.TargetProperty="Tag" >
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="UnselectedPointerOver" />
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="SelectedPressed">
                                                <Storyboard>
                                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
														Storyboard.TargetProperty="Tag" >
                                                        <DiscreteObjectKeyFrame KeyTime="0" Value="SelectedPointerOver" />
                                                    </ObjectAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    <controls:TabHeader
										x:Name="ContentPresenter"
										Payload="{TemplateBinding Content}"
										Tag="Unselected">
                                        <controls:TabHeader.RenderTransform>
                                            <TranslateTransform x:Name="ContentPresenterTranslateTransform" />
                                        </controls:TabHeader.RenderTransform>
                                    </controls:TabHeader>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Pivot.Resources>
            <Pivot.Style>
                <StaticResource ResourceKey="TabbedPivotStyle"/>
            </Pivot.Style>
            <PivotItem Margin="12,0,0,0">
                <PivotItem.Header>
                    <controls:TabHeaderContent IconPath="F 1 M 16,2.59375 L 15.2813,3.28125 2.28125,16.2813 3.71875,17.7188 5,16.4375 5,27 5,28 6,28 13,28 14,28 14,27 14,18 18,18 18,27 18,28 19,28 26,28 27,28 27,27 27,16.4375 28.2813,17.7188 29.7188,16.2813 16.7188,3.28125 16,2.59375 Z M 16,5.4375 L 25,14.4375 25,26 20,26 20,17 20,16 19,16 13,16 12,16 12,17 12,26 7,26 7,14.4375 16,5.4375 Z" Label="Home"/>
                </PivotItem.Header>
                <SplitView DisplayMode="Overlay" IsPaneOpen="{Binding IsPaneOpen, Mode=TwoWay}" DataContext="{Binding GalleryVM}" PaneBackground="#EE000000" MinWidth="0" OpenPaneLength="296" >
                    <SplitView.Pane>
                        <Grid>
                            <ListView ItemsSource="{Binding Topics}" IsItemClickEnabled="True" ItemContainerStyle="{StaticResource TopicsListViewItemStyle}" SelectedIndex="{Binding TopicSelectedIndex, Mode=TwoWay}">
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="ItemClick">
                                        <Core:CallMethodAction MethodName="TopicTapped" TargetObject="{Binding Mode=OneWay}"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <templates:TopicTemplate Tag="{Binding Tag, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </Grid>
                    </SplitView.Pane>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <FontIcon Glyph="&#xE700;" >
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="Tapped">
                                        <Core:CallMethodAction MethodName="OpenPane" TargetObject="{Binding Mode=OneWay}"/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                            </FontIcon>
                            <TextBlock Text="{Binding Title, ConverterParameter=u, Converter={StaticResource CaseConverter}}" Grid.Column="1" Margin="12" VerticalAlignment="Center" FontWeight="Medium" FontSize="16"/>
                            <Border Grid.Column="2" Background="#FF666666" HorizontalAlignment="Right" VerticalAlignment="Center" CornerRadius="3" Visibility="{Binding IsSectionVisible, Converter={StaticResource BoolToVisibilityConverter}}" Margin="12,0">
                                <FlyoutBase.AttachedFlyout>
                                    <MenuFlyout>
                                        <MenuFlyoutItem Text="Popular" Command="{Binding SectionCommand}" CommandParameter="{Binding Text, RelativeSource={RelativeSource Mode=Self}}"/>
                                        <MenuFlyoutItem Text="Top" Command="{Binding SectionCommand}" CommandParameter="{Binding Text, RelativeSource={RelativeSource Mode=Self}}"/>
                                    </MenuFlyout>
                                </FlyoutBase.AttachedFlyout>
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="Tapped">
                                        <Behaviors:OpenFlyoutAction/>
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                                <Grid>
                                    <TextBlock Text="{Binding Section}" Margin="12,4" VerticalAlignment="Center"/>
                                </Grid>
                            </Border>
                        </Grid>
                        <controls:ColumnGridView Grid.Row="1" ItemsSource="{Binding Images}">
                            <Interactivity:Interaction.Behaviors>
                                <Core:EventTriggerBehavior EventName="ItemClick">
                                    <Core:CallMethodAction TargetObject="{Binding Mode=OneWay}" MethodName="ImageTapped"/>
                                </Core:EventTriggerBehavior>
                            </Interactivity:Interaction.Behaviors>
                        </controls:ColumnGridView>
                    </Grid>
                </SplitView>
            </PivotItem>
            <PivotItem>
                <PivotItem.Header>
                    <controls:TabHeaderContent IconPath="F 1 M 18.6563,4 C 16.5591,4 15,5.70728 15,7.65625 L 15,11.0313 C 12.2406,11.1739 9.74312,11.9048 7.71875,13.0625 6.94528,12.3166 5.91375,11.9993 4.90625,12 3.81706,12.0008 2.70555,12.3548 1.9375,13.2188 L 1.9375,13.25 1.90625,13.2813 C 1.16948,14.202 0.866025,15.4317 1.0625,16.6563 1.2426,17.7788 1.89744,18.9199 3.03125,19.6563 3.0251,19.7706 3,19.8843 3,20 3,22.604 4.57524,24.8878 6.9375,26.4688 9.29976,28.0497 12.4865,29 16,29 19.5135,29 22.7002,28.0497 25.0625,26.4688 27.4248,24.8878 29,22.604 29,20 29,19.8843 28.9749,19.7706 28.9688,19.6563 30.1026,18.9199 30.7574,17.7788 30.9375,16.6563 31.134,15.4317 30.8305,14.202 30.0938,13.2813 L 30.0625,13.25 C 29.2943,12.3859 28.183,12.0008 27.0938,12 26.0862,11.9993 25.0545,12.3163 24.2813,13.0625 22.2569,11.9048 19.7594,11.1739 17,11.0313 L 17,7.65625 C 17,6.67722 17.5594,6 18.6563,6 19.1769,6 19.8191,6.24528 20.8125,6.59375 21.657,6.88997 22.7509,7.21883 24.1563,7.3125 24.498,8.28718 25.4124,9 26.5,9 27.875,9 29,7.875 29,6.5 29,5.125 27.875,4 26.5,4 25.5547,4 24.7372,4.53336 24.3125,5.3125 23.1152,5.24351 22.2463,4.9915 21.4688,4.71875 20.5649,4.40172 19.7326,4 18.6563,4 Z M 16,13 C 19.1535,13 21.9665,13.8684 23.9375,15.1875 25.9085,16.5066 27,18.204 27,20 27,21.796 25.9085,23.4934 23.9375,24.8125 21.9665,26.1316 19.1535,27 16,27 12.8465,27 10.0335,26.1316 8.0625,24.8125 6.09151,23.4934 5,21.796 5,20 5,18.204 6.09151,16.5066 8.0625,15.1875 10.0335,13.8684 12.8465,13 16,13 Z M 4.90625,14 C 5.28676,13.9997 5.66096,14.0938 5.96875,14.25 4.88352,15.1587 4.03878,16.2405 3.53125,17.4375 3.27553,17.1163 3.12496,16.7331 3.0625,16.3438 2.95477,15.6723 3.15009,14.9759 3.46875,14.5625 3.47407,14.5556 3.46336,14.538 3.46875,14.5313 3.77168,14.2108 4.31306,14.0004 4.90625,14 Z M 27.0938,14 C 27.6871,14.0004 28.2284,14.2109 28.5313,14.5313 28.5334,14.5336 28.5291,14.5602 28.5313,14.5625 28.8499,14.9759 29.0452,15.6723 28.9375,16.3438 28.875,16.7331 28.7245,17.1163 28.4688,17.4375 27.9612,16.2405 27.1165,15.1587 26.0313,14.25 26.339,14.0938 26.7131,13.9997 27.0938,14 Z M 11,16 C 9.89543,16 9,16.8954 9,18 9,19.1046 9.89543,20 11,20 12.1046,20 13,19.1046 13,18 13,16.8954 12.1046,16 11,16 Z M 21,16 C 19.8954,16 19,16.8954 19,18 19,19.1046 19.8954,20 21,20 22.1046,20 23,19.1046 23,18 23,16.8954 22.1046,16 21,16 Z M 21.25,21.5313 C 20.1,22.5982 18.172,23.2813 16,23.2813 13.828,23.2813 11.9,22.5893 10.75,21.6563 11.389,23.3892 13.444,25 16,25 18.556,25 20.611,23.3983 21.25,21.5313 Z" Label="Reddit"/>
                </PivotItem.Header>
                <Grid DataContext="{Binding SubredditsVM}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="POPULAR SUBREDDITS" FontSize="15" FontWeight="Bold" Margin="0,16,0,0"/>
                    <ListView Grid.Row="1" ItemsSource="{Binding Subreddits}" Margin="-10,20,0,0" SelectionMode="None" IsItemClickEnabled="True">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,0,0,8">
                                    <TextBlock Text="{Binding Title}" Style="{StaticResource SubtitleTextBlockStyle}"/>
                                    <TextBlock FontSize="14" Opacity="0.8">
										<Run FontFamily="/Assets/Fonts/Icons8.ttf#Downloaded" Text="&#xF100;"/>
										<Run Text="/r/"/>
										<Run Text="{Binding Url}"/>
                                    </TextBlock>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                        <Interactivity:Interaction.Behaviors>
                            <Core:EventTriggerBehavior EventName="ItemClick">
                                <Core:CallMethodAction TargetObject="{Binding Mode=OneWay}" MethodName="SubredditTapped"/>
                            </Core:EventTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>
                    </ListView>
                </Grid>
            </PivotItem>
            <PivotItem Margin="0">
                <PivotItem.Header>
                    <controls:TabHeaderContent IconPath="F 1 M 19,3 C 13.489,3 9,7.489 9,13 9,15.395 9.83895,17.5881 11.25,19.3125 L 3.28125,27.2813 4.71875,28.7188 12.6875,20.75 C 14.4119,22.161 16.605,23 19,23 24.511,23 29,18.511 29,13 29,7.489 24.511,3 19,3 Z M 19,5 C 23.4301,5 27,8.56988 27,13 27,17.4301 23.4301,21 19,21 14.5699,21 11,17.4301 11,13 11,8.56988 14.5699,5 19,5 Z" Label="Search"/>
                </PivotItem.Header>
                <Grid DataContext="{Binding SearchVM}">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <StackPanel Margin="6,0" Orientation="Horizontal">
                        <ToggleButton Content="REDDITS" Margin="6,12" Height="25" Style="{StaticResource SearchTabToggleButtonStyle}" Command="{Binding SearchCommand}" CommandParameter="Reddits" ext:ToggleButtonExtensions.IsChecked="{Binding IsReddit}" Width="75" />
                        <ToggleButton Content="POSTS" Margin="6,12" Height="25" Grid.Column="1" Style="{StaticResource SearchTabToggleButtonStyle}" Command="{Binding SearchCommand}" CommandParameter="Posts" ext:ToggleButtonExtensions.IsChecked="{Binding IsPosts}" Width="75" />
                        <ToggleButton Content="GIFS" Margin="6,12" Height="25" Grid.Column="3" Style="{StaticResource SearchTabToggleButtonStyle}" Command="{Binding SearchCommand}" CommandParameter="Gifs" ext:ToggleButtonExtensions.IsChecked="{Binding IsGifs}" Width="75" />
                    </StackPanel>
                    <AutoSuggestBox Text="{Binding QueryText, Mode=TwoWay}" PlaceholderText="Search awesomeness" Margin="12,0" QueryIcon="Find" Grid.Row="1" QuerySubmitted="AutoSuggestBox_QuerySubmitted" IsEnabled="{Binding IsLoading, Converter={StaticResource BooleanInverseConverter}}"/>
                    <TextBlock Text="Search Results" FontSize="12" Foreground="#FF959595" Grid.Row="2" Margin="12" FontWeight="SemiBold"/>
                    <ProgressBar Grid.Row="3" IsIndeterminate="True" Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    <ListView ItemsSource="{Binding Subreddits}" Grid.Row="4" Visibility="{Binding IsReddit, Converter={StaticResource BoolToVisibilityConverter}}" SelectionMode="None">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <templates:RedditResultTemplate 
                                    ToggleFavoriteCommand="{Binding DataContext.SubredditsVM.ToggleFavorite, ElementName=PageRoot}"
                                    GoToSubCommand="{Binding DataContext.SubredditsVM.GoToSub, ElementName=PageRoot}"/>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                            </Style>
                        </ListView.ItemContainerStyle>
                    </ListView>                 
                    <controls:ColumnGridView ItemsSource="{Binding Posts}" Grid.Row="4" Visibility="{Binding IsPosts, Converter={StaticResource BoolToVisibilityConverter}}" Margin="12,0,0,0">
                        <Interactivity:Interaction.Behaviors>
                            <Core:EventTriggerBehavior EventName="ItemClick">
                                <Core:CallMethodAction TargetObject="{Binding Mode=OneWay}" MethodName="ImageTapped"/>
                            </Core:EventTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>
                    </controls:ColumnGridView>
                    <GridView ItemsSource="{Binding Gifs}" Grid.Row="4" Visibility="{Binding IsGifs, Converter={StaticResource BoolToVisibilityConverter}}" Margin="12,0,0,0">
                        <GridView.ItemContainerStyle>
                            <Style TargetType="GridViewItem">
                                <Setter Property="Margin" Value="0,0,12,12"/>
                            </Style>
                        </GridView.ItemContainerStyle>
                        <GridView.ItemTemplate>
                            <DataTemplate>
                                <templates:SquareThumbnailTemplate/>
                            </DataTemplate>
                        </GridView.ItemTemplate>
                        <Interactivity:Interaction.Behaviors>
                            <Core:EventTriggerBehavior EventName="ItemClick">
                                <Core:CallMethodAction TargetObject="{Binding Mode=OneWay}" MethodName="ImageTapped"/>
                            </Core:EventTriggerBehavior>
                        </Interactivity:Interaction.Behaviors>
                    </GridView>
                </Grid>
            </PivotItem>
            <PivotItem Margin="12,0,0,0">                
                <PivotItem.Header>
                    <controls:TabHeaderContent IconPath="F 1 M 16,4 C 12.1459,4 9,7.14585 9,11 9,13.3931 10.2204,15.5178 12.0625,16.7813 8.48555,18.3029 6,21.8599 6,26 L 8,26 C 8,21.5333 11.5333,18 16,18 20.4667,18 24,21.5333 24,26 L 26,26 C 26,21.8599 23.5144,18.3029 19.9375,16.7813 21.7796,15.5178 23,13.3931 23,11 23,7.14585 19.8541,4 16,4 Z M 16,6 C 18.7733,6 21,8.22673 21,11 21,13.7733 18.7733,16 16,16 13.2267,16 11,13.7733 11,11 11,8.22673 13.2267,6 16,6 Z" Label="Account"/>
                </PivotItem.Header>
                <Grid DataContext="{Binding AccountVM}">
                    <Grid.Resources>
                        <Style x:Key="GroupHeaderStyle" TargetType="TextBlock">
                            <Setter Property="FontSize" Value="15"/>
                            <Setter Property="FontWeight" Value="ExtraBold"/>
                        </Style>
                        <Style x:Key="CountStyle" TargetType="Border">
                            <Setter Property="Margin" Value="8,0"/>
                            <Setter Property="Height" Value="18"/>
                            <Setter Property="MinWidth" Value="18"/>
                            <Setter Property="Background" Value="#FF528ACA"/>
                        </Style>
                        <Style x:Key="CountTextStyle" TargetType="TextBlock">
                            <Setter Property="FontSize" Value="12"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="VerticalAlignment" Value="Center"/>
                        </Style>
                        <Style TargetType="ListViewItem">
                            <Setter Property="Margin" Value="0,0,12,0"/>
                            <Setter Property="MinWidth" Value="10"/>
                            <Setter Property="MinHeight" Value="10"/>
                            <Setter Property="Padding" Value="0"/>
                        </Style>
                        <Style x:Key="HorizontalListViewStyle" TargetType="ListView">
                            <Setter Property="MinHeight" Value="50"/>
                            <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Auto"/>
                            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
                            <Setter Property="ScrollViewer.VerticalScrollMode" Value="Disabled"/>
                            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled"/>
                            <Setter Property="SelectionMode" Value="None"/>
                            <Setter Property="IsItemClickEnabled" Value="True"/>
                            <Setter Property="ItemsPanel">
                                <Setter.Value>
                                    <ItemsPanelTemplate>
                                        <ItemsStackPanel Orientation="Horizontal"/>
                                    </ItemsPanelTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Grid.Resources>
                    <ScrollViewer Visibility="{Binding State, ConverterParameter=Authenticated, Converter={StaticResource StateToVisibilityConverter}}" VerticalScrollMode="Auto" VerticalScrollBarVisibility="Auto">
                        <!--<ScrollViewer Visibility="Visible">-->
                        <StackPanel Margin="0,0,12,0">
                            <!--#region User info-->
                            <StackPanel Orientation="Horizontal" Margin="0,12,0,0">
                                <Border Height="24" Width="24" Background="{StaticResource AppThemeBrush}" CornerRadius="12"/>
                                <TextBlock Text="HELLO" FontWeight="Bold" Margin="8,0" VerticalAlignment="Center"/>
                            </StackPanel>
                            <TextBlock Text="{Binding UserName}" FontSize="36" FontWeight="Light"/>
                            <TextBlock FontSize="12" FontWeight="SemiBold" Margin="0,0,0,8">
                                <Run Text="{Binding Points}"/>
                                <Run Text="Points"/>
                            </TextBlock>
                            <!--#endregion-->

                            <!--#region Trophies -->
                            <Grid Margin="0,16,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="TROPHIES" VerticalAlignment="Center" Style="{StaticResource GroupHeaderStyle}"/>
                                <Border Style="{StaticResource CountStyle}" Grid.Column="1">
                                    <TextBlock Text="{Binding Trophies.Count}" Style="{StaticResource CountTextStyle}"/>
                                </Border>                                
                            </Grid>
                            <ListView ItemsSource="{Binding Trophies}" Style="{StaticResource HorizontalListViewStyle}" >
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="ItemClick">
                                        <Core:CallMethodAction MethodName="ImageTapped" TargetObject="{Binding Mode=OneWay}" />
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="Gray" Height="75" Width="75">
                                            <Image Margin="4" Source="{Binding Image}"/>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                            <!--#endregion-->

                            <!--#region Albums -->
                            <Grid Margin="0,16,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="ALBUMS" VerticalAlignment="Center" Style="{StaticResource GroupHeaderStyle}"/>
                                <Border Style="{StaticResource CountStyle}" Grid.Column="1">
                                    <TextBlock Text="{Binding Albums.Count}" Style="{StaticResource CountTextStyle}"/>
                                </Border>
                                <HyperlinkButton Grid.Column="2" HorizontalAlignment="Right" Padding="0" Command="{Binding ViewAllCommand}" CommandParameter="albums">
                                    <TextBlock Text="View All" FontSize="12" FontWeight="SemiBold" Foreground="{StaticResource AppThemeBrush}"/>
                                </HyperlinkButton>
                            </Grid>
                            <ListView ItemsSource="{Binding Albums}" Style="{StaticResource HorizontalListViewStyle}">
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="ItemClick">
                                        <Core:CallMethodAction MethodName="ImageTapped" TargetObject="{Binding Mode=OneWay}" />
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="Gray" Height="75" Width="75">
                                            <Image Source="{Binding Thumbnail}"/>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                            <!--#endregion -->

                            <!--#region Images -->
                            <Grid Margin="0,16,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="IMAGES" VerticalAlignment="Center" Style="{StaticResource GroupHeaderStyle}"/>
                                <Border Style="{StaticResource CountStyle}" Grid.Column="1">
                                    <TextBlock Text="{Binding Images.Count}" Style="{StaticResource CountTextStyle}"/>
                                </Border>
                                <HyperlinkButton Grid.Column="2" HorizontalAlignment="Right" Padding="0" Command="{Binding ViewAllCommand}" CommandParameter="images">
                                    <TextBlock Text="View All" FontSize="12" FontWeight="SemiBold" Foreground="{StaticResource AppThemeBrush}"/>
                                </HyperlinkButton>
                            </Grid>
                            <ListView ItemsSource="{Binding Images}" Style="{StaticResource HorizontalListViewStyle}">
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="ItemClick">
                                        <Core:CallMethodAction MethodName="ImageTapped" TargetObject="{Binding Mode=OneWay}" />
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="Gray" Height="75" Width="75">
                                            <Image Source="{Binding Thumbnail}"/>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                            <!--#endregion-->

                            <!--#region Favourites -->
                            <Grid Margin="0,16,0,8">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="FAVOURITES" VerticalAlignment="Center" Style="{StaticResource GroupHeaderStyle}"/>
                                <Border Style="{StaticResource CountStyle}" Grid.Column="1">
                                    <TextBlock Text="{Binding Favourites.Count}" Style="{StaticResource CountTextStyle}"/>
                                </Border>
                                <HyperlinkButton Grid.Column="2" HorizontalAlignment="Right" Padding="0" Command="{Binding ViewAllCommand}" CommandParameter="favourites">
                                    <TextBlock Text="View All" FontSize="12" FontWeight="SemiBold" Foreground="{StaticResource AppThemeBrush}"/>
                                </HyperlinkButton>
                            </Grid>
                            <ListView ItemsSource="{Binding Favourites}" Style="{StaticResource HorizontalListViewStyle}">
                                <Interactivity:Interaction.Behaviors>
                                    <Core:EventTriggerBehavior EventName="ItemClick">
                                        <Core:CallMethodAction MethodName="ImageTapped" TargetObject="{Binding Mode=OneWay}" />
                                    </Core:EventTriggerBehavior>
                                </Interactivity:Interaction.Behaviors>
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Background="Gray" Height="75" Width="75">
                                            <Image Source="{Binding Thumbnail}"/>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                            <!--#endregion-->
                        </StackPanel>
                    </ScrollViewer>
                    <Border Background="Black" Visibility="{Binding State, ConverterParameter=NotAuthenticated, Converter={StaticResource StateToVisibilityConverter}}" >
                        <Button Content="Sign In" HorizontalAlignment="Center" Command="{Binding SignInCommand}"/>
                    </Border>
                    <Border Background="Black" Visibility="{Binding State, ConverterParameter=Busy, Converter={StaticResource StateToVisibilityConverter}}">
                        <ProgressRing IsActive="True" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Border>
                </Grid>
            </PivotItem>
        </Pivot>
    </Grid>
</Page>
